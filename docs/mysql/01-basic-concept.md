---
noteId: "962ddeb047fa11f0a6929b02b627d898"
tags: []

---

考点：

- 0A.1 理解数据库相关的基本概念；
- 0A.2 掌握数据库系统的特点与结构

---

## 数据库是什么

定义：

- 数据库是数据的结构化集合。
- 数据库用于存储和管理有组织的数据。

理解：

- 具有某种管理规则的数据的集合。
- 随便收集起来的数据集合不能称为数据库。
- 规则是：具备增删改查等管理功能的规则。

## MySQL 是什么

MySQL 是一个开源的关系型数据库管理系统（RDBMS）,基于 SQL（结构化查询语言）存储、管理和检索结构化数据。

- 由瑞典公司 MySQL AB 开发，现在属于 Oracle 公司。

## 关系数据库是什么

关系数据库是一种基于关系模型的数据库，核心思想是用`表(Table)`存储和管理数据，并通过表之间的关系组织数据。

## MySQL 的主要特点

1. 社区版是开源免费的，企业版是付费的。
2. 跨平台（可在Windows、Linux、macOS 等操作系统上安装使用）
3. 执行速度快，查询处理效率高，支持大量数据，支持高并发访问。
4. 支持多种编程语言：常与 PHP、Python、Java 等语言结合使用

## 基本概念

### **表（Table）**
- 数据库中的核心组件，以行和列的形式存储数据。  
- **示例**：`users` 表可能包含 `id`、`name`、`email` 等字段。

### **字段（Column/Field）**
- 表的列，表示数据的属性（如 `age`、`price`）。  
- 每个字段有特定的数据类型（如整数、字符串、日期等）。

### **记录（Row/Record）**
- 表中的一行数据，表示一个实体的完整信息。  
- **示例**：`(1, "Alice", "alice@example.com")` 是 `users` 表的一条记录。

### **主键（Primary Key）**
- 唯一标识表中每条记录的字段（如 `id`），不能重复或为 `NULL`。

### **SQL**

- SQL:Structured Query Language（结构化查询语言）
- 用于操作数据库的标准语言，分为几类：  
  - **DDL**（数据定义语言）：创建/修改表结构（如 `CREATE TABLE`）。  
  - **DML**（数据操作语言）：增删改数据（如 `INSERT`、`UPDATE`）。  
  - **DQL**（数据查询语言）：查询数据（如 `SELECT`）。  

### **索引（Index）**
- 加速数据检索的数据结构（类似书籍目录），但会增加写入开销。  
- **示例**：`CREATE INDEX idx_name ON users(name);`

### **外键（Foreign Key）**
- 用于关联两个表的字段，确保数据完整性。  
- **示例**：`orders` 表中的 `user_id` 可能引用 `users` 表的 `id`。

### **事务（Transaction）**
- 一组原子性操作，要么全部成功，要么全部失败。  
- 特性：**ACID**（原子性、一致性、隔离性、持久性）。  
- **示例**：银行转账需保证扣款和收款同时完成。

### **存储引擎（Storage Engine）**
- MySQL的核心组件，决定数据如何存储和检索。  
- 常见引擎：  
  - **InnoDB**：支持事务、外键（默认引擎）。  
  - **MyISAM**：读性能高，但不支持事务（旧版本常用）。  

### **视图（View）**
- 虚拟表，基于SQL查询结果生成，简化复杂查询。  
- **示例**：`CREATE VIEW active_users AS SELECT * FROM users WHERE status='active';`

### **触发器（Trigger）**
- 在特定事件（如插入/删除）时自动执行的SQL代码。  
- **用途**：自动化数据校验或日志记录。

### **存储过程（Stored Procedure）**
- 预先编译的SQL代码集合，可重复调用，减少网络传输。

---
## **SQL数据库系统的核心特点**

- 结构化数据模型（表行列）
- 关系模型与完整性约束（主键外键约束）
- 标准化查询语言（SQL、DDl、DML、DQL）
- ACID 事务支持（原子性、一致性、隔离性、持久性）
- 高性能与优化机制（索引、缓存、分区、优化器）
- 可扩展性与高可用（垂直扩展、水平扩展、集群方案）
- 安全机制（权限、数据加密）
- 跨平台与兼容性

## **SQL数据库的分层架构**

SQL 数据库系统通常采用 **分层架构**，主要分为：

- 存储引擎层
- 查询处理层
- 服务层
- 客户端层

---

### 客户端层
- **功能**：用户与数据库交互的入口。  
- **组件**：
  - **客户端工具**（如 MySQL Workbench、`mysql` 命令行）。  
  - **应用程序接口**（JDBC/ODBC、ORM 框架如 Hibernate）。  
- **协议**：通过 TCP/IP 或 Socket 与服务器通信（默认端口 `3306`）。

### 服务层
- **功能**：接收 SQL 请求，处理连接、权限和查询优化。  
- **核心模块**：
  - **连接管理器**：管理客户端连接（线程池或协程）。  
  - **SQL 接口**：解析 SQL 语句，检查语法。  
  - **查询缓存**（MySQL 8.0 已移除）：缓存查询结果。  
  - **优化器**：生成执行计划（如选择索引、JOIN 顺序）。  
  - **执行引擎**：调用存储引擎接口执行操作。

### 存储引擎层
- **功能**：负责数据的物理存储和检索。  
- **常见引擎**：
  - **InnoDB**：支持事务、行级锁、外键（MySQL 默认）。  
  - **MyISAM**：不支持事务，但查询速度快。  
  - **Memory**：数据存于内存，重启丢失。  
- **关键机制**：
  - 缓冲池（Buffer Pool）  
  - 事务日志（Redo Log/Undo Log）  
  - 锁管理（行锁、表锁）。

### 文件系统层
- **功能**：持久化存储数据文件。  
- **文件类型**：
  - **表结构文件**（`.frm`，MySQL 8.0 后移除）。  
  - **数据文件**（InnoDB 的 `.ibd`，MyISAM 的 `.MYD`）。  
  - **日志文件**（Binlog、Redo Log）。  

---

## **SQL数据库的逻辑结构**

### (1) 数据库（Database）
- 数据容器，包含多个表、视图、存储过程等。  
- **示例**：  
  ```sql
  CREATE DATABASE school;
  ```

### (2) 表（Table）
- 二维结构，由行（记录）和列（字段）组成。  
- **示例**：  
  ```sql
  CREATE TABLE students (
      id INT PRIMARY KEY,
      name VARCHAR(50)
  );
  ```

### (3) 索引（Index）
- 加速数据检索的数据结构（如 B+Tree）。  
- **示例**：  
  ```sql
  CREATE INDEX idx_name ON students(name);
  ```

### (4) 视图（View）
- 虚拟表，基于 SQL 查询结果。  
- **示例**：  
  ```sql
  CREATE VIEW active_students AS 
  SELECT * FROM students WHERE status = 'active';
  ```

### (5) 存储过程/触发器
- 预编译的 SQL 代码块，用于业务逻辑封装。  
- **示例**：  
  ```sql
  CREATE TRIGGER log_enrollment 
  AFTER INSERT ON enrollments
  FOR EACH ROW 
  INSERT INTO logs VALUES (NOW(), 'New enrollment');
  ```

---

## 物理存储结构(InnoDB 为例)
### **(1) 表空间（Tablespace）**
- **系统表空间**：存储元数据（`ibdata1` 文件）。  
- **独立表空间**：每张表对应一个 `.ibd` 文件（MySQL 5.6+ 默认）。  

### **(2) 页（Page）**
- InnoDB 最小存储单元（默认 `16KB`），存储行数据、索引等。  

### **(3) 行格式（Row Format）**
- 如 `COMPACT`、`DYNAMIC`（MySQL 5.7+ 默认），影响存储效率。  

### **(4) 日志文件**
- **Redo Log**：崩溃恢复保障（`ib_logfile0/1`）。  
- **Undo Log**：事务回滚时恢复数据。  
- **Binlog**：主从复制的逻辑日志。  

---

## **总结**
- **分层架构**：客户端 → 服务层 → 存储引擎 → 文件系统。  
- **逻辑结构**：数据库 → 表 → 索引/视图/存储过程。  
- **物理存储**：表空间、页、日志文件。  
- **适用场景**：需要强一致性、复杂查询的业务（如金融、ERP）。  

理解数据库结构有助于优化 SQL 性能、设计高效的数据模型！



## 练习1:登录退出

要求：

1. 使用CMD命令行工具登录mysql
2. 登录成功后，再退出mysql
3. 反复操作三次。

参考答案

```sql
cd C:\Program Files\MySQL\MySQL Server 8.4\bin
mysql -u root -p123456
```

----

