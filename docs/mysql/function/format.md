---
noteId: "d6283e20309411f08660ed443661e5a0"
tags: []

---

MySQL中的`FORMAT()`函数主要用于格式化数字，使其更易读（如添加千位分隔符、控制小数位数）。以下是详细解析：

---

一、语法与参数
```sql
FORMAT(number, decimal_places [, locale])
```

• `number`：必需，要格式化的数字（整数或浮点数）。

• `decimal_places`：必需，指定保留的小数位数（若为0则省略小数部分，自动四舍五入）。

• `locale`：可选，指定千位分隔符和小数点的符号（如`'de_DE'`用`.`作千位分隔符，默认为`'en_US'`）。


---

二、核心功能

1. 千位分隔符  
   自动添加逗号（如`1234567` → `1,234,567`）。
2. 小数位控制  
   指定保留位数并四舍五入（如`1234.567`保留2位 → `1,234.57`）。
3. 负数处理  
   保留负号（如`-1234.567` → `-1,234.57`）。

---

三、示例代码
1. 基本格式化  

```sql
SELECT FORMAT(1234567.891, 2);  -- 输出 '1,234,567.89'
SELECT FORMAT(-987654.321, 0); -- 输出 '-987,654'
```


2. 指定语言环境  

```sql
SELECT FORMAT(1234567.891, 2, 'de_DE'); -- 输出 '1.234.567,89'（逗号作小数点）
```



3. 财务数据应用  

```sql
SELECT product_name, CONCAT('￥', FORMAT(price * quantity, 2)) 
FROM sales;  -- 输出如 '￥12,345.67'
```



---

四、注意事项
1. 返回类型  
   结果为字符串，需转换回数值才能进一步计算。
2. 性能影响  
   大数据量时建议在应用层格式化，避免查询性能下降。
3. 精度问题  
   极大/极小数字可能因`DOUBLE`类型限制导致科学计数法显示。

---

五、对比其他函数

| 函数          | 用途                     | 示例                     |
|---------------|--------------------------|--------------------------|
| `FORMAT()`    | 数字格式化（带分隔符）   | `1,234.56`               |
| `ROUND()`     | 单纯四舍五入             | `1234.57`（无分隔符）    |
| `TRUNCATE()`  | 截断小数（不四舍五入）   | `1234.56` → `1234.56`    |

---

六、常见问题
• Q：如何去除千位分隔符？  

  A：结合`REPLACE()`函数：  

  ```sql
  SELECT REPLACE(FORMAT(1234567, 2), ',', '');  -- 输出 '1234567.00'
  ```
• Q：日期能否用`FORMAT()`？  

  A：建议用`DATE_FORMAT()`，语法不同（如`%Y-%m-%d`）。

通过合理使用`FORMAT()`，可显著提升数据可读性，尤其在财务报表或用户界面中。