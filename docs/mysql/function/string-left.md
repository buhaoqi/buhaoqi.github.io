---
noteId: "2df651b0308011f08660ed443661e5a0"
tags: []

---

---

### **MySQL 中 `LEFT()` 函数详解**

`LEFT()` 是 MySQL 中用于从字符串 **左侧截取指定长度字符** 的函数，适用于提取固定格式数据的场景（如订单号前缀、身份证号前6位等）。以下是详细说明及用法示例。

---

### **一、语法与参数**
```sql
LEFT(str, length)
```
- **参数说明**：
  - `str`：原始字符串（可以是字段名或字符串字面量）。
  - `length`：要截取的字符数（必须是正整数）。
- **返回值**：
  - 从字符串左侧开始截取的子字符串。
  - 若 `length` 为 `0` 或负数，返回空字符串 `''`。
  - 若 `str` 为 `NULL`，返回 `NULL`。

---

### **二、核心功能与示例**

#### **1. 基础截取**
| **场景**               | **示例**                   | **输出结果**      | **说明**                     |
|------------------------|---------------------------|-------------------|-----------------------------|
| 截取前 N 个字符        | `LEFT('Hello World', 5)`  | `'Hello'`         | 截取前5个字符               |
| 长度等于字符串长度     | `LEFT('MySQL', 5)`        | `'MySQL'`         | 完整返回原字符串            |
| 长度超过字符串长度     | `LEFT('abc', 10)`         | `'abc'`           | 返回整个字符串              |
| 空字符串或长度为0      | `LEFT('', 3)`             | `''`              | 返回空字符串                |

#### **2. 多字节字符处理（如中文、Emoji）**
```sql
-- 示例字符串：'你好世界'（UTF-8 编码，每个中文字符占3字节）
SELECT LEFT('你好世界', 2);  -- 输出 '你好'（按字符计数，而非字节）
```

#### **3. 边界条件处理**
| **场景**               | **示例**                   | **输出结果**      |
|------------------------|---------------------------|-------------------|
| `length` 为负数        | `LEFT('Hello', -2)`       | `''`              |
| `length` 为0           | `LEFT('Hello', 0)`        | `''`              |
| `str` 为 `NULL`        | `LEFT(NULL, 3)`           | `NULL`            |

---

### **三、与 `SUBSTRING()` 的区别**
| **函数**       | **语法**                     | **特点**                          | **适用场景**               |
|----------------|------------------------------|-----------------------------------|----------------------------|
| `LEFT()`       | `LEFT(str, length)`          | 仅支持从左侧截取固定长度          | 提取固定前缀（如订单号）   |
| `SUBSTRING()`  | `SUBSTRING(str, start, len)` | 支持任意起始位置和长度            | 灵活截取任意位置的子字符串 |

---

### **四、实际应用场景**

#### **场景 1：提取身份证号前6位（行政区划代码）**
```sql
SELECT LEFT(id_card, 6) AS area_code FROM employees;
```

#### **场景 2：截取订单号前缀（如年月部分）**
```sql
-- 假设订单号格式为 '20231001-0001'
SELECT LEFT(order_no, 8) AS order_date FROM orders;
```

#### **场景 3：格式化手机号显示**
```sql
-- 显示前3位 + **** + 后4位（如 '138****5678'）
SELECT CONCAT(LEFT(phone, 3), '****', RIGHT(phone, 4)) AS masked_phone 
FROM users;
```

---

### **五、性能与注意事项**
1. **索引影响**：  
   - 在 `WHERE` 子句中直接使用 `LEFT()` 可能导致全表扫描。  
   - **优化方案**：  
     - 预存截取结果到新字段并建立索引。  
     - 使用函数索引（MySQL 8.0+）：  
       ```sql
       CREATE INDEX idx_area_code ON employees ((LEFT(id_card, 6)));
       ```

2. **多字节字符集**：  
   - `LEFT()` 按字符截取，而非字节。确保字符集支持（如 `utf8mb4`）。

3. **长度参数处理**：  
   - `length` 必须是正整数，否则返回空字符串或无效结果。

---

### **六、总结**
- **核心作用**：快速截取字符串左侧固定长度的内容。
- **最佳实践**：  
  - 处理固定格式数据（如日期、编码、前缀）。  
  - 结合 `CONCAT()` 或 `RIGHT()` 实现复杂格式化。  
- **适用场景**：  
  - 数据清洗（提取关键字段）。  
  - 敏感信息脱敏（隐藏部分内容）。  
  - 日志分析（截取固定格式的时间戳）。  

掌握 `LEFT()` 的使用方法，可以高效完成字符串截取需求，但需注意性能优化和字符集兼容性。