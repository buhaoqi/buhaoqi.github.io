---
noteId: "147042f0801711f0b719b57fd933995f"
tags: []

---


## 值类型和引用类型的区别

||值类型|引用类型|
|--|--|--|
|存储|值|值的引用|
|内存|栈|堆|
|分配|编译时分配内存空间|运行时分配内存空间|

## 装箱和拆箱

装箱和拆箱：实现值类型和引用类型相互转换。例如

```c#
int i = 10;//定义变量i并赋值
object obj1 = i; //装箱：将i的值复制给obj1
```
变量i是在栈空间中分配的，obj是引用类型变量。它也是在栈空间中分配的。

当i装箱后变为引用类型，在堆空间中分配相应的空间，obj中包含其地址。


等价于

```c#
object obj = (object)i;
```

拆箱转换

是指将一个引用类型的数据显式的转换成一个值类型数据。

```C#
int i = 10;
object obj = i; //装箱
int j = (int) obj;//拆箱
```

- 拆箱转换必须执行显式转换，这是它与装箱转换的不同之处，并且在执行拆箱操作时，需要符合类型一致的原则。
- 类型一致的意思是：拆箱时，你不能随便转，必须拆回它原本的类型，这就是所谓的“类型一致原则”。​