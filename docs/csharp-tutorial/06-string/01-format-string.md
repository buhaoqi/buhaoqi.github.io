---
noteId: "796bf090669611f0a3469bc4f2844c38"
tags: []

---
## **开场**  

> 🎙️ “大家好！欢迎观看《C#初学者实例教程》第7课《格式化输出》。
> 
> 我是张杰。
>
> 上节课我们学习了基本的输入输出数据的方法。
>
> 本节课我们进一步深入学习数据的输出，`WriteLine()` 方法提供了多种灵活的方式来格式化输出内容。接下来，我们进入讲解。

---

`WriteLine()`方法 是 C# 中最常用的输出方法之一，用于向控制台输出数据并自动添加换行符。它的基本用法有以下3种：

## 用法1:基础输出

第一种用法：向控制台输出值或变量

- 输出值(字面量)：`Console.WriteLine(值)`
- 输出变量：`Console.WriteLine(变量名)`
- 空行：`Console.WriteLine()`

## 用法2:多参数输出

第二种用法：向控制台输出多个参数

示例：向控制台输出变量a,b,c的值

```c# linenums="1"
int a = 10, b = 20, c = 30;
//把这三个值输出到控制台，作为初学者可能很自然的这样写：使用逗号分割三个变量
Console.WriteLine(a,b,c); 
```
但是，运行后程序却报错了。

这是因为`WriteLine()`方法不接受三个独立的参数，如果希望正确输出3个参数，必须在首位增加一个字符串，像这样：

```c# linenums="1"
int a = 10, b = 20, c = 30;
Console.WriteLine("a={0}，b={1},c={2}",a,b,c); 
```
在字符串中，使用花括号{}把多个参数分别插进来：

- 在花括号内填写0可以插入第一个参数
- 填写1，可以插入第二个参数
- 以此类推：数字0、1、2分别对应参数的位置

这个字符串是一个复合参数，我们称之为“格式化字符串”。

花括号在这里被称作“格式化占位符”。它的使用规则是：

- 一一对应：
- 可以省略
- 允许重复


## 用法3:数值格式化

第三种用法：对数据进行格式化再输出

格式化数据的语法如下

```c# linenums="1"
格式项语法：{索引[,对齐][:格式说明符]}
```

关键组成部分

|部分|	示例	|说明|
|--|--|--|
|固定文本|	"结果: {0}"	|直接输出的文字内容|
|索引占位符|{0}	|对应方法的第一个参数（索引从0开始）|
|对齐控制|	{0, -5}	|负数为左对齐，正数为右对齐，数字代表总宽度|
|格式说明符	|{0:N2}	|指定数据显示格式（如 N2 表示带2位小数的千分位格式）|


**格式说明符**：


| **格式说明符** | **语法格式**       | **含义**                     | **示例输入**       | **输出示例**         |
|----------------|--------------------|-----------------------------|--------------------|----------------------|
| **货币格式**   | `{0:C}`| 使用本地货币符号，n为小数位数 | `1234.56`          | `¥1,234.56` (中文)   |
| **小数格式符**   | `{0:F}`| 保留n位小数（默认2位）       | `3.14159` (F2)     | `3.14`               |
| **百分比格式符**     | `{0:P}`| 数值×100并添加%符号，n为小数位 | `0.123` (P1)       | `12.3%`              |
| **整数格式符**   | `{0:D5}`| 补位0，添加5位整数    | `89`  | `00089`       |


示例：编写一个控制台程序，使用 Console.WriteLine() 的复合格式化功能，输出以下格式的商品销售报表：

- 商品名称（左对齐，占15字符宽度）
- 单价（货币格式，带¥符号）
- 库存数量（5位数字，不足前面补零）
- 折扣率（百分比格式，保留2位小数）
- 折扣后价格（保留2位小数）

代码

```c# linenums="1"
string pName = "无线蓝牙耳机";
double price = 299;
int stock = 90;
double discountRate = 0.15;
double discountedPrice = price * ( 1- discountRate);

//表头
Console.WriteLine("{0}{1:C}{2:D5}{3:P0} {4:F2}", pName, price, stock, discountRate, discountedPrice);
```

## 用法4:对齐控制
第四种用法：对数据进行对齐输出

示例：对齐格式化数据后的商品销售报表：

输出结果

```bash
————————————————————————————————————————————————————————
商品名称        价格       库存     折扣率    打折后价格
————————————————————————————————————————————————————————
无线蓝牙耳机    ¥299.00   00090     15%        254.15    
————————————————————————————————————————————————————————
```


代码

```c# linenums="1"
string pName = "无线蓝牙耳机";
double price = 299;
int stock = 90;
double discountRate = 0.15;
double discountedPrice = price * ( 1- discountRate);

//表头
Console.WriteLine("———————————————————————————————————————————————————————————");
Console.WriteLine("{0,-12}{1,-9}{2,-7}{3,-7}{4,-5}","商品名称","价格","库存","折扣率","打折后价格");
Console.WriteLine("———————————————————————————————————————————————————————————");
Console.WriteLine("{0,-10}{1,-10:c}{2,-10:d5}{3,-10:P0} {4,-10:F2}", pName, price, stock, discountRate, discountedPrice);
Console.WriteLine("———————————————————————————————————————————————————————————");
```

## 结束语

本节课就到这里，这里是不好奇编程，我是张杰。感谢你的认真学习，我们下节课见！

下节预告：《字符串是什么》—— 让输出更优雅。

慢慢学，一点点进步就很好！

## 练习

### 1.格式化字符串
```csharp
// 输入圆的直径（字符串），计算周长（double）
Console.Write("请输入圆的直径: ");
string input = Console.ReadLine();

if (double.TryParse(input, out double diameter)) {
    double circumference = Math.PI * diameter; // 使用double计算
    Console.WriteLine($"周长: {circumference:F2}"); // 保留两位小数
} else {
    Console.WriteLine("输入的不是有效数字！");
}
```