---
noteId: "1bf005d062ab11f0a138bb2f2278db69"
tags: []

---

## **开场**  

> 🎙️ “大家好！欢迎观看《C#初学者实例教程》的第6课《插值字符串》—— 让输出更优雅。
> 
> 我是张杰。
> 
> 上节课我们学了如何通过 Console.ReadLine() 和 Console.WriteLine() 实现基本的数据输入与输出。
> 
> 今天，我们要让输出变得更——优——雅！

---
## 拼接字符串

先来复习下传统的拼接字符串的写法：

```csharp
string name = "小明";
int age = 20;
Console.WriteLine("姓名：" + name + "，年龄：" + age);
```

是不是有点啰嗦？尤其变量多的时候，拼接写法非常容易出错、可读性差。

---

## 插值字符串亮相！

插值字符串是一种字符串的特殊写法，特殊在于使用花括号把变量插入字符串内。语法格式更简洁：

```c# linenums="1"
$"字符串中嵌入变量：{变量名}"

```
说明：

- 字符串的双引号前面有个 美元符号 $
- 变量包在 `{}` 中

示例

```csharp
Console.WriteLine($"姓名：{name}，年龄：{age}");
```
我们来对比两种写法：插值字符串看起来更整洁，代码更易读，特别是当字符串中有多个变量时，优势更明显。

优点一看就懂：

* **更短**
* **更清晰**
* **更易维护**

---

## 支持表达式

插值字符串不仅能嵌入变量，还能直接写表达式：

```csharp
Console.WriteLine($"明年你就 {age + 1} 岁啦！");
```

甚至还能这样写：

```csharp
Console.WriteLine($"名字全大写是：{name.ToUpper()}");
```

是不是像在拼乐高，想放什么就放什么？

---

## 格式化数字输出
如果你想让数字显示得更美观，比如保留两位小数、显示为货币格式，也可以加上格式说明符。

其他常用数字格式说明符

| 格式符 | 作用 | 示例（输入=1234.5678） | 输出 |
|--------|------|-----------------------|------|
| `F2` | 固定2位小数 | `1234.5678.ToString("F2")` | `1234.57` |
| `C2` | 货币格式 | `1234.5678.ToString("C2")` | `¥1,234.57` |
| `N2` | 千分位分隔 | `1234.5678.ToString("N2")` | `1,234.57` |
| `P1` | 百分比1位小数 | `0.456.ToString("P1")` | `45.6%` |
| `0.00` | 强制补零 | `8.ToString("0.00")` | `8.00` |

---

1. 插值字符串还能格式化数字，比如：

```csharp
double price = 19.99;
Console.WriteLine($"商品价格：{price:F2} 元");  // 保留两位小数
```

`C2`表示将数值格式化为**固定小数点格式**，并**保留2位小数**。它的完整含义：

| 部分 | 说明 | 示例（price=12.5） |
|------|------|-------------------|
| `F` | Fixed-point（固定小数点格式） | 自动补零到指定小数位 |
| `2` | 小数位数 | 强制显示2位小数 |
| 结果 | `12.50`（自动补零） |

2.货币格式

```csharp
double salary = 8888.8;
Console.WriteLine($"月薪：{salary:C}");  // ¥8888.8
```

`C` 是一个**标准数字格式说明符**，表示将数值格式化为**货币（Currency）格式**。

| 特性                | 说明         | 示例（salary = 8888.8） |
|---------------------|-------------------|-------------------------|
| **货币符号**        | 自动添加当前区域设置的货币符号  | ¥8,888.80（中文环境）   |
| **千位分隔符**      | 每三位数字添加分隔符       | 8,888.80                |
| **小数位数**        | 默认保留2位小数（自动补零） | .80                     |
| **文化差异**        | 根据系统区域设置显示不同格式   | $8,888.80（美国环境）   |
| **自动四舍五入**    | 对小数部分进行银行家舍入  | 8888.8 → 8888.80        |


3.还有百分比格式：

```csharp
double rate = 0.256;
Console.WriteLine($"增长率：{rate:P1}");  // 25.6% P = Percent，保留1位小数
```
P1 是一个标准数字格式说明符，表示将数值格式化为百分比形式，并保留1位小数。

`P1` 的完整含义

| 部分 | 说明 | 数学转换规则 | 示例（rate=0.256） |
|------|------|--------------|-------------------|
| `P`  | Percentage（百分比格式） | 值 × 100 | 25.6 |
| `1`  | 小数位数 | 四舍五入到指定位数 | 25.6% |
| 结果 | **自动添加百分号** |  | `25.6%` |

关键特性

| 特性 | 说明 | 示例 |
|------|------|------|
| **自动乘100** | 输入值0.25 → 显示25% | `0.25 → "25.0%"` |
| **补零显示** | 不足小数位时补零 | `0.5 → "50.0%"` |
| **四舍五入** | 银行家舍入规则 | `0.256 → "25.6%"` |
| **文化差异** | 百分号位置可能变化 | 法语环境显示`25,6 %` |

---

与其他百分比格式对比

| 格式符 | 输入0.25678 | 输出（中文环境） | 特点 |
|--------|------------|------------------|------|
| `P`    | 0.25678    | 25.68%           | 默认2位小数 |
| `P1`   | 0.25678    | 25.7%            | 1位小数 |
| `P0`   | 0.25678    | 26%              | 整数百分比 |
| `P4`   | 0.25678    | 25.6780%         | 4位小数 |


---

## 总结
今天我们学会了：

- 插值字符串的基本语法：$"{变量}"
- 在插值字符串中使用表达式
- 格式化数字的几种方式（F2、C）

有了插值字符串，我们的输出就不再笨拙，而是清晰、自然、好维护！

---

## 结束语

到这里，我们的插值字符串就讲完啦！

不管你输出的是文字、数字，还是表情，插值字符串赶紧用起来，让你的代码更优雅！

本节课就到这里，这里是不好奇编程，我是张杰。感谢你的认真学习，我们下节课见！

下节预告：《插值字符串》—— 让输出更优雅。

慢慢学，一点点进步就很好！

## 课后练习

试试自己动手写：

1. 让用户输入姓名、成绩，用插值字符串输出一句话：

   > “学生 {name} 的成绩是 {score} 分。”

2. 输入一个价格，输出“价格为：￥xxx.xx”。

---

