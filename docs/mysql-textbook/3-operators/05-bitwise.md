---
noteId: "4e0adb2075da11f08787c9dafe86ffae"
tags: []

---


![运算符](../images/ebooks/079.jpeg) 
![运算符](../images/ebooks/080.jpeg) 
![运算符](../images/ebooks/081.jpeg)

# MySQL 中位运算符的用法详解

在 MySQL 中，**位运算符（Bitwise Operators）** 是用于对**整数值的二进制位进行逐位操作**的特殊运算符。它们通常用于底层数据处理、权限控制、标志位管理、以及一些高性能或特定算法场景。

虽然位运算符在日常开发中使用频率相对较低，但在某些**特定业务逻辑（如权限模型、状态压缩、标志组合）**中，它们能发挥非常高效和简洁的作用。

---

## 一、什么是位运算符？

位运算符直接操作数据的**二进制位（bit）**，而不是数值本身。它们将操作数视为**二进制形式**，然后按位进行逻辑运算，比如：

- 按位与（AND）
- 按位或（OR）
- 按位异或（XOR）
- 按位取反（NOT）
- 左移位（<<）
- 右移位（>>）

---

## 二、MySQL 支持的位运算符一览

| 运算符 | 名称 | 描述 | 示例 | 结果（十进制） |
|--------|------|------|------|----------------|
| `&` | **按位与** | 两个数的二进制位**都为 1 时结果才为 1** | `5 & 3` | `1` |
| `|` | **按位或** | 两个数的二进制位**有一个为 1 则结果为 1** | `5 | 3` | `7` |
| `^` | **按位异或** | 两个数的二进制位**不同则为 1，相同则为 0** | `5 ^ 3` | `6` |
| `~` | **按位取反** | **单目运算符**，将操作数的每一位取反（0 ↔ 1） | `~5` | （依赖整数位数，通常是补码表示） |
| `<<` | **左移位** | 将二进制位向左移动指定位数，右边补 0 | `1 << 2` | `4` |
| `>>` | **右移位** | 将二进制位向右移动指定位数，左边补符号位（或 0） | `8 >> 2` | `2` |

> ✅ 注意：
> - 位运算符的操作数一般为 **整数类型（TINYINT, INT, BIGINT）**
> - 运算结果也是整数
> - 位运算通常用于**标志位组合、权限模型、状态压缩、特殊算法等场景**

---

## 三、位运算符详解与示例

---

### ✅ 1. 按位与 `&`（Bitwise AND）

**规则：** 两个操作数的对应二进制位**都为 1 时，结果的该位才为 1**，否则为 0。

#### 🎯 示例：
```sql
SELECT 5 & 3;   -- 结果：1
```

#### 🔍 二进制分析：
- 5 的二进制：`0101`
- 3 的二进制：`0011`
- 按位与： `0101 & 0011 = 0001` → 十进制 `1`

✅ 应用：判断某个标志位是否被设置（如权限检查）

---

### ✅ 2. 按位或 `|`（Bitwise OR）

**规则：** 两个操作数的对应二进制位**只要有一个为 1，结果的该位就为 1**。

#### 🎯 示例：
```sql
SELECT 5 | 3;   -- 结果：7
```

#### 🔍 二进制分析：
- 5：`0101`
- 3：`0011`
- 按位或：`0101 | 0011 = 0111` → 十进制 `7`

✅ 应用：合并多个标志位（如权限组合）

---

### ✅ 3. 按位异或 `^`（Bitwise XOR）

**规则：** 两个操作数的对应二进制位**不相同则为 1，相同则为 0**。

#### 🎯 示例：
```sql
SELECT 5 ^ 3;   -- 结果：6
```

#### 🔍 二进制分析：
- 5：`0101`
- 3：`0011`
- 按位异或：`0101 ^ 0011 = 0110` → 十进制 `6`

✅ 应用：交换变量值、加密算法、校验等

---

### ✅ 4. 按位取反 `~`（Bitwise NOT）

**规则：** **单目运算符**，将操作数的**每一位取反（0 ↔ 1）**，包括符号位。

> ⚠️ 注意：在 MySQL 中，整数是以**补码形式**存储的，所以结果可能与直观理解不同。

#### 🎯 示例：
```sql
SELECT ~5;     -- 结果：-6
```

#### 🔍 解析（以 8 位为例，仅作说明，实际 MySQL 使用更大 INT 范围）：
- 5 的原码：`00000101`
- 补码：同原码（正数）
- 按位取反：`11111010` → 这是一个负数的补码，对应的十进制是 `-6`

✅ 应用：底层位操作、特殊掩码处理

---

### ✅ 5. 左移位 `<<`（Left Shift）

**规则：** 将二进制位向左移动指定位数，**右侧空出的位补 0**，相当于乘以 2 的 n 次方。

#### 🎯 示例：
```sql
SELECT 1 << 2;   -- 结果：4
```

#### 🔍 解析：
- 1 的二进制：`0001`
- 左移 2 位：`0100` → 十进制 `4`
- 相当于：1 × 2² = 4

✅ 应用：快速计算 2^n、状态位移、权限叠加

---

### ✅ 6. 右移位 `>>`（Right Shift）

**规则：** 将二进制位向右移动指定位数，**左侧空出的位补符号位（正数补0，负数补1）**，相当于除以 2 的 n 次方并取整。

#### 🎯 示例：
```sql
SELECT 8 >> 2;   -- 结果：2
```

#### 🔍 解析：
- 8 的二进制：`1000`
- 右移 2 位：`0010` → 十进制 `2`
- 相当于：8 ÷ 2² = 2

✅ 应用：快速除以 2^n、位掩码解析

---

## 四、位运算符的实际应用场景

### ✅ 1. 权限控制系统（常用）

利用 **位掩码（bitmask）**，每个权限用一个二进制位表示，通过 `|` 组合权限，用 `&` 判断是否拥有某权限。

#### 示例：
- 读权限：`1` （二进制 `0001`）
- 写权限：`2` （二进制 `0010`）
- 删除权限：`4` （二进制 `0100`）
- 管理权限：`8` （二进制 `1000`）

```sql
-- 用户权限组合：读 + 写 = 1 | 2 = 3
SELECT 1 | 2;   -- 结果：3

-- 判断是否有写权限（2）：权限值 & 2 != 0
SELECT 3 & 2;   -- 结果：2 → 有写权限
SELECT 1 & 2;   -- 结果：0 → 无写权限
```

---

### ✅ 2. 状态压缩 / 标志位管理

将多个布尔状态（如是否激活、是否通知、是否 VIP）压缩到一个整数字段中，通过位运算高效存储与判断。

---

### ✅ 3. 快速计算 2^n、除以 2^n

- 左移 `<<` 相当于 ×2ⁿ
- 右移 `>>` 相当于 ÷2ⁿ（取整）

```sql
SELECT 1 << 3;  -- 1×2³ = 8
SELECT 16 >> 2; -- 16÷2² = 4
```

---

## 五、总结：MySQL 位运算符速查表

| 运算符 | 名称 | 描述 | 示例 | 结果（十进制） |
|--------|------|------|------|----------------|
| `&` | 按位与 | 两个位都为 1 时结果为 1 | `5 & 3` | `1` |
| `|` | 按位或 | 任意一个位为 1 则结果为 1 | `5 | 3` | `7` |
| `^` | 按位异或 | 两个位不同时为 1 | `5 ^ 3` | `6` |
| `~` | 按位取反 | 所有位取反（单目运算符） | `~5` | `-6` |
| `<<` | 左移位 | 二进制左移 n 位，相当于 ×2ⁿ | `1 << 2` | `4` |
| `>>` | 右移位 | 二进制右移 n 位，相当于 ÷2ⁿ | `8 >> 2` | `2` |

---

## 📌 下一步建议

你可以尝试以下练习来掌握位运算符：

1. ✅ 使用 `&` 判断一个数字是否包含某个标志位（如权限系统中判断是否有写权限）
2. ✅ 使用 `|` 合并多个权限标志为一个整数
3. ✅ 用 `<<` 和 `>>` 实现快速乘除 2 的幂运算
4. ✅ 在用户表中设计一个 `flags` 或 `permissions` INT 字段，用位运算存储多种状态
5. ✅ 实现简单的状态压缩（如是否订阅、是否通知、是否 VIP 等）

---

如你希望获取：

- ✅ **权限控制系统的完整 SQL 示例（含位运算实现）**
- ✅ 如何在 **表字段中存储多个布尔状态并进行位操作查询**
- ✅ 或者位运算在 **算法题、高性能计算、底层数据设计** 中的应用

